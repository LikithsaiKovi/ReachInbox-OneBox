<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Forgot Password - ReachInbox Onebox</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Inter', sans-serif; background:#F9FAFB; min-height:100vh; display:flex; align-items:center; justify-content:center; }
        .card { background:#fff; width:100%; max-width:420px; border-radius:16px; box-shadow:0 10px 30px rgba(0,0,0,.08); padding:28px; }
        h1 { font-size:22px; margin:0 0 6px; color:#111827; }
        p { color:#6B7280; font-size:14px; margin:0 0 18px; }
        label { display:block; font-size:14px; color:#374151; margin:10px 0 6px; }
        input { width:100%; padding:12px 14px; border:1px solid #E5E7EB; border-radius:10px; font-size:14px; background:#F9FAFB; }
        input:focus { outline:none; border-color:#7C3AED; background:#fff; box-shadow:0 0 0 3px rgba(124,58,237,.12); }
        button { width:100%; padding:12px; border:none; background:#7C3AED; color:#fff; border-radius:10px; font-weight:600; margin-top:14px; cursor:pointer; }
        .note { font-size:12px; color:#6B7280; margin-top:12px; }
        .link { display:inline-block; margin-top:14px; font-size:14px; color:#7C3AED; text-decoration:none; }
        .alert { margin-top:12px; padding:10px 12px; border-radius:10px; font-size:13px; display:none; }
        .alert.success { background:#D1FAE5; color:#065F46; border:1px solid #A7F3D0; }
        .alert.error { background:#FEE2E2; color:#991B1B; border:1px solid #FECACA; }
    </style>
</head>
<body>
    <div class="card">
        <h1>Forgot your password?</h1>
        <p>Enter your email. If it exists, we'll send a reset link.</p>
        <label for="email">Email</label>
        <input id="email" type="email" placeholder="you@example.com" required />
        <button id="sendBtn" type="button">Send reset link</button>
        <div id="msg" class="alert"></div>
        <a class="link" href="/login">Back to Sign In</a>
    </div>
    <script>
        function toast(text, type='info') {
            const t = document.createElement('div');
            t.style.cssText = `position:fixed; top:16px; right:16px; z-index:2000; padding:12px 14px; border-radius:10px; font-size:13px; box-shadow:0 8px 24px rgba(0,0,0,.12); ${type==='success' ? 'background:#D1FAE5;color:#065F46;border:1px solid #A7F3D0' : type==='error' ? 'background:#FEE2E2;color:#991B1B;border:1px solid #FECACA' : 'background:#EEF2FF;color:#3730A3;border:1px solid #C7D2FE'}`;
            t.textContent = text;
            document.body.appendChild(t);
            setTimeout(()=>{ t.remove(); }, 2500);
        }
        const btn = document.getElementById('sendBtn');
        const emailEl = document.getElementById('email');
        const msg = document.getElementById('msg');
        btn.addEventListener('click', async (e) => {
            e.preventDefault();
            msg.style.display = 'none';
            const email = emailEl.value.trim();
            if (!email) { show('Please enter your email', true); return; }
            try {
                const res = await fetch('/api/password/forgot', { method:'POST', headers:{'Content-Type':'application/json'}, body: JSON.stringify({ email }) });
                const data = await res.json();
                if (!res.ok) throw new Error(data.message || 'Failed to send');
                show('If the email exists, a reset link has been sent.', false);
                toast('Check your inbox for a reset link', 'success');
            } catch (e) {
                show(e.message || 'Something went wrong', true);
                toast('Could not send reset link', 'error');
            }
        });
        function show(text, isError){ msg.textContent = text; msg.className = 'alert ' + (isError ? 'error' : 'success'); msg.style.display = 'block'; }
    </script>
</body>
</html>
